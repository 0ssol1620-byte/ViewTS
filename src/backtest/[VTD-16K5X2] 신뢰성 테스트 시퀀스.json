{
  "name": "Combined_Camera_Stress_Test_v2_7_SingleCam_Final",
  "description": "Single-camera-optimized: Line-scan endurance, ScanDirection toggle, SD/HD binning compare & Linescan-valid parameter sweep.",
  "version": "2.7",
  "steps": [
    {
      "id": "Intro",
      "name": "Intro",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "Starting Combined Camera Stress Test v2.7..."
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "step_1754541224277_811",
      "name": "Configure Linescan Dimensions",
      "action_id": "configure_linescan_dimensions",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "Div_LS",
      "name": "Div_LS",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "=============== Section ①: Line-scan Endurance ==============="
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_LogStart",
      "name": "LS_LogStart",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "[LS] Free-run 10 kHz Line-scan (single cam)"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "step_1754640642694_500",
      "name": "LS_TestPattern",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "TestPattern",
        "value": "GreyHorizontalRamp"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_StopAll",
      "name": "LS_StopAll",
      "action_id": "execute_command",
      "enabled": true,
      "parameters": {
        "command_name": "AcquisitionStop",
        "_on_error": "continue"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_ResetAllCounters",
      "name": "LS_ResetAllCounters",
      "action_id": "reset_all_counters",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_Cfg",
      "name": "LS_Cfg",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": ">> Setup Camera"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_SetScanType",
      "name": "LS_SetScanType",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "DeviceScanType",
        "value": "Linescan"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_SetOffsetX0",
      "name": "LS_SetOffsetX0",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "OffsetX",
        "value": 0
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_SetBin1",
      "name": "LS_SetBin1",
      "action_id": "set_binning",
      "enabled": true,
      "parameters": {
        "horizontal_factor": 1,
        "vertical_factor": 1
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_SetPixFmt8",
      "name": "LS_SetPixFmt8",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "PixelFormat",
        "value": "Mono8"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_SetLineRate",
      "name": "LS_SetLineRate",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "AcquisitionLineRate",
        "value": "100000.0"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_TrigSel",
      "name": "LS_TrigSel",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "TriggerSelector",
        "value": "LineStart"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_TrigMode",
      "name": "LS_TrigMode",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "TriggerMode",
        "value": "Off"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_Start",
      "name": "LS_Start",
      "action_id": "start_grab",
      "enabled": true,
      "parameters": {
        "buffer_count": 128
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_Warmup",
      "name": "LS_Warmup",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 200
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_LoopStart",
      "name": "LS_LoopStart",
      "action_id": "repeat_block_start",
      "enabled": true,
      "parameters": {
        "block_id": "linescan_endurance_loop",
        "count": 10,
        "index_key": "main_test_loop_idx"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": true,
      "loop_start_label": "LS_CycleStart_Log",
      "loop_start_index": 20,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_CycleStart_Log",
      "name": "LS_CycleStart_Log",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "--- [LS] Cycle {main_test_loop_idx} ---",
        "_condition": "eval: ({main_test_loop_idx} % 100) == 0"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_Grab",
      "name": "LS_Grab",
      "action_id": "get_next_frame",
      "enabled": true,
      "parameters": {
        "output_context_key": "frame",
        "timeout_ms": 1500,
        "_on_error": "continue"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_CheckLoss",
      "name": "LS_CheckLoss",
      "action_id": "check_frame_loss",
      "enabled": true,
      "parameters": {
        "max_lost_frames": 10,
        "max_lost_triggers": 0,
        "max_stream_errors": 0,
        "_on_error": "continue"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_AssertGain",
      "name": "LS_AssertGain",
      "action_id": "assert_feature",
      "enabled": true,
      "parameters": {
        "feature": "Gain",
        "expected": "1.0"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_AssertLR",
      "name": "LS_AssertLR",
      "action_id": "assert_feature",
      "enabled": true,
      "parameters": {
        "feature": "AcquisitionLineRate",
        "expected": "100000.0"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_TempCond",
      "name": "LS_TempCond",
      "action_id": "set_context_variable",
      "enabled": true,
      "parameters": {
        "key": "log_temp",
        "value": "eval: ({main_test_loop_idx} % 50) == 0"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_TempRead",
      "name": "LS_TempRead",
      "action_id": "read_parameter",
      "enabled": true,
      "parameters": {
        "feature": "DeviceTemperature",
        "output_context_key": "temp",
        "_condition": "{log_temp}"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_TempLog",
      "name": "LS_TempLog",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "[LS][Temp] {temp}°C",
        "_condition": "{log_temp}"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_StopPix",
      "name": "LS_StopPix",
      "action_id": "execute_command",
      "enabled": true,
      "parameters": {
        "command_name": "AcquisitionStop",
        "_condition": "eval: {main_test_loop_idx} == 2",
        "_on_error": "continue"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_Pix12",
      "name": "LS_Pix12",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "PixelFormat",
        "value": "Mono12",
        "_condition": "eval: {main_test_loop_idx} == 2"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_RestartPix",
      "name": "LS_RestartPix",
      "action_id": "start_grab",
      "enabled": true,
      "parameters": {
        "buffer_count": 128,
        "_condition": "eval: {main_test_loop_idx} == 2"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_WaitPix",
      "name": "LS_WaitPix",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 200,
        "_condition": "eval: {main_test_loop_idx} == 2"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_GrabPix",
      "name": "LS_GrabPix",
      "action_id": "get_next_frame",
      "enabled": true,
      "parameters": {
        "output_context_key": "frame_pix",
        "_condition": "eval: {main_test_loop_idx} == 2"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_StopBin",
      "name": "LS_StopBin",
      "action_id": "execute_command",
      "enabled": true,
      "parameters": {
        "command_name": "AcquisitionStop",
        "_condition": "eval: {main_test_loop_idx} == 4",
        "_on_error": "continue"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_Bin2",
      "name": "LS_Bin2",
      "action_id": "set_binning",
      "enabled": true,
      "parameters": {
        "horizontal_factor": 2,
        "vertical_factor": 1,
        "_condition": "eval: {main_test_loop_idx} == 4"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_RestartBin",
      "name": "LS_RestartBin",
      "action_id": "start_grab",
      "enabled": true,
      "parameters": {
        "buffer_count": 128,
        "_condition": "eval: {main_test_loop_idx} == 4"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_WaitBin",
      "name": "LS_WaitBin",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 200,
        "_condition": "eval: {main_test_loop_idx} == 4"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_GrabBin",
      "name": "LS_GrabBin",
      "action_id": "get_next_frame",
      "enabled": true,
      "parameters": {
        "output_context_key": "frame_bin",
        "_condition": "eval: {main_test_loop_idx} == 4"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_StopReBin",
      "name": "LS_StopReBin",
      "action_id": "execute_command",
      "enabled": true,
      "parameters": {
        "command_name": "AcquisitionStop",
        "_condition": "eval: {main_test_loop_idx} == 6",
        "_on_error": "continue"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_Bin1back",
      "name": "LS_Bin1back",
      "action_id": "set_binning",
      "enabled": true,
      "parameters": {
        "horizontal_factor": 1,
        "vertical_factor": 1,
        "_condition": "eval: {main_test_loop_idx} == 6"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_SetPixFmt8_back",
      "name": "LS_SetPixFmt8_back",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "PixelFormat",
        "value": "Mono8",
        "_condition": "eval: {main_test_loop_idx} == 6"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_RestartReBin",
      "name": "LS_RestartReBin",
      "action_id": "start_grab",
      "enabled": true,
      "parameters": {
        "buffer_count": 128,
        "_condition": "eval: {main_test_loop_idx} == 6"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_WaitReBin",
      "name": "LS_WaitReBin",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 200,
        "_condition": "eval: {main_test_loop_idx} == 6"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_GrabReBin",
      "name": "LS_GrabReBin",
      "action_id": "get_next_frame",
      "enabled": true,
      "parameters": {
        "output_context_key": "frame_rebin",
        "_condition": "eval: {main_test_loop_idx} == 6"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_CycleGap",
      "name": "LS_CycleGap",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 5
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_EndLoop",
      "name": "LS_EndLoop",
      "action_id": "repeat_block_end",
      "enabled": true,
      "parameters": {
        "block_id": "linescan_endurance_loop"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_LogEnd",
      "name": "LS_LogEnd",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "[LS] Section finished."
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "LS_StopGrab",
      "name": "LS_StopGrab",
      "action_id": "stop_grab",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "Div_SD",
      "name": "Div_SD",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "=============== Section ②: ScanDirection Toggle ==============="
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_LogStart",
      "name": "SD_LogStart",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "[SD] ScanDirection toggle – max 1000 loops"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_Connect",
      "name": "SD_Connect",
      "action_id": "connect_camera",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_StartGrab",
      "name": "SD_StartGrab",
      "action_id": "start_grab",
      "enabled": true,
      "parameters": {
        "buffer_count": 128
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_LoopStart",
      "name": "SD_LoopStart",
      "action_id": "repeat_block_start",
      "enabled": true,
      "parameters": {
        "block_id": "scan_direction_loop",
        "count": 1000,
        "index_key": "scan_loop_idx"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": true,
      "loop_start_label": "SD_CycleStart",
      "loop_start_index": 54,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_CycleStart",
      "name": "SD_CycleStart",
      "action_id": "set_context_variable",
      "enabled": true,
      "parameters": {
        "key": "scan_direction",
        "value": "eval: 'Forward' if {scan_loop_idx} % 2 == 0 else 'Backward'"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_SetScanDirection",
      "name": "SD_SetScanDirection",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "ScanDirection",
        "value": "{scan_direction}"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_WaitParam",
      "name": "SD_WaitParam",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 100
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_Grab",
      "name": "SD_Grab",
      "action_id": "get_next_frame",
      "enabled": true,
      "parameters": {
        "output_context_key": "frame_current",
        "timeout_ms": 1500
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_DetectScrambled",
      "name": "SD_DetectScrambled",
      "action_id": "detect_scrambled_image",
      "enabled": true,
      "parameters": {
        "current_frame_key": "frame_current",
        "reference_frame_key": "frame_ref_{scan_direction}",
        "ssim_threshold": 0.85,
        "mean_diff_threshold": 15.0
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_Sleep",
      "name": "SD_Sleep",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 100
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_EndLoop",
      "name": "SD_EndLoop",
      "action_id": "repeat_block_end",
      "enabled": true,
      "parameters": {
        "block_id": "scan_direction_loop"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_StopGrab",
      "name": "SD_StopGrab",
      "action_id": "stop_grab",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "SD_LogEnd",
      "name": "SD_LogEnd",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "[SD] Section finished."
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "Div_BN",
      "name": "Div_BN",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "=============== Section ③: SD/HD Binning Compare ==============="
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_LogStart",
      "name": "BN_LogStart",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "[BN] SD/HD binning compare – max 1000 loops"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_ref_Stop",
      "name": "BN_SD_ref_Stop",
      "action_id": "execute_command",
      "enabled": true,
      "parameters": {
        "command_name": "AcquisitionStop"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_ref_SetBin",
      "name": "BN_SD_ref_SetBin",
      "action_id": "set_binning",
      "enabled": true,
      "parameters": {
        "horizontal_factor": 2,
        "vertical_factor": 1
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_ref_SetWidth",
      "name": "BN_SD_ref_SetWidth",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "Width",
        "value": 2464
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_ref_SetOffX",
      "name": "BN_SD_ref_SetOffX",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "OffsetX",
        "value": 0
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_ref_Start",
      "name": "BN_SD_ref_Start",
      "action_id": "start_grab",
      "enabled": true,
      "parameters": {
        "buffer_count": 128
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_ref_Wait",
      "name": "BN_SD_ref_Wait",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 200
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_ref_Grab",
      "name": "BN_SD_ref_Grab",
      "action_id": "get_next_frame",
      "enabled": true,
      "parameters": {
        "output_context_key": "pattern_sd",
        "timeout_ms": 1500
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_ref_StopAfterGrab",
      "name": "BN_SD_ref_StopAfterGrab",
      "action_id": "stop_grab",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_ref_Connect",
      "name": "BN_HD_ref_Connect",
      "action_id": "connect_camera",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_ref_Stop",
      "name": "BN_HD_ref_Stop",
      "action_id": "execute_command",
      "enabled": true,
      "parameters": {
        "command_name": "AcquisitionStop"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_ref_SetBin",
      "name": "BN_HD_ref_SetBin",
      "action_id": "set_binning",
      "enabled": true,
      "parameters": {
        "horizontal_factor": 1,
        "vertical_factor": 1
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_ref_SetWidth",
      "name": "BN_HD_ref_SetWidth",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "Width",
        "value": 4928
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_ref_SetOffX",
      "name": "BN_HD_ref_SetOffX",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "OffsetX",
        "value": 1984
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_ref_Start",
      "name": "BN_HD_ref_Start",
      "action_id": "start_grab",
      "enabled": true,
      "parameters": {
        "buffer_count": 128
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_ref_Wait",
      "name": "BN_HD_ref_Wait",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 200
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_ref_Grab",
      "name": "BN_HD_ref_Grab",
      "action_id": "get_next_frame",
      "enabled": true,
      "parameters": {
        "output_context_key": "pattern_hd",
        "timeout_ms": 1500
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_ref_StopAfterGrab",
      "name": "BN_HD_ref_StopAfterGrab",
      "action_id": "stop_grab",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_LoopStart",
      "name": "BN_LoopStart",
      "action_id": "repeat_block_start",
      "enabled": true,
      "parameters": {
        "block_id": "binning_compare_loop",
        "count": 1000,
        "index_key": "bin_loop_idx"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": true,
      "loop_start_label": "BN_SD_loop_Connect",
      "loop_start_index": 87,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_Connect",
      "name": "BN_SD_loop_Connect",
      "action_id": "connect_camera",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_Stop",
      "name": "BN_SD_loop_Stop",
      "action_id": "execute_command",
      "enabled": true,
      "parameters": {
        "command_name": "AcquisitionStop"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_SetBin",
      "name": "BN_SD_loop_SetBin",
      "action_id": "set_binning",
      "enabled": true,
      "parameters": {
        "horizontal_factor": 2,
        "vertical_factor": 1
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_SetWidth",
      "name": "BN_SD_loop_SetWidth",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "Width",
        "value": 2464
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_SetOffX",
      "name": "BN_SD_loop_SetOffX",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "OffsetX",
        "value": 0
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_Start",
      "name": "BN_SD_loop_Start",
      "action_id": "start_grab",
      "enabled": true,
      "parameters": {
        "buffer_count": 128
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_Wait",
      "name": "BN_SD_loop_Wait",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 200
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_Grab",
      "name": "BN_SD_loop_Grab",
      "action_id": "get_next_frame",
      "enabled": true,
      "parameters": {
        "output_context_key": "frame_sd",
        "timeout_ms": 1500
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_StopAfterGrab",
      "name": "BN_SD_loop_StopAfterGrab",
      "action_id": "stop_grab",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_Brightness",
      "name": "BN_SD_loop_Brightness",
      "action_id": "calculate_image_stats",
      "enabled": true,
      "parameters": {
        "frame_context_key": "frame_sd",
        "output_context_key_prefix": "sd_brt_",
        "calculate_mean": true
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_Compare",
      "name": "BN_SD_loop_Compare",
      "action_id": "compare_brightness",
      "enabled": true,
      "parameters": {
        "current_brightness_key": "sd_brt_mean",
        "previous_brightness_key": "sd_prev_brt",
        "threshold": 10.0
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_SD_loop_Scramble",
      "name": "BN_SD_loop_Scramble",
      "action_id": "detect_scrambled_image",
      "enabled": true,
      "parameters": {
        "current_frame_key": "frame_sd",
        "reference_frame_key": "pattern_sd",
        "ssim_threshold": 0.85,
        "mean_diff_threshold": 15.0
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_Stop",
      "name": "BN_HD_loop_Stop",
      "action_id": "execute_command",
      "enabled": true,
      "parameters": {
        "command_name": "AcquisitionStop"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_SetBin",
      "name": "BN_HD_loop_SetBin",
      "action_id": "set_binning",
      "enabled": true,
      "parameters": {
        "horizontal_factor": 1,
        "vertical_factor": 1
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_SetWidth",
      "name": "BN_HD_loop_SetWidth",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "Width",
        "value": 4928
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_SetOffX",
      "name": "BN_HD_loop_SetOffX",
      "action_id": "set_parameter",
      "enabled": true,
      "parameters": {
        "parameter_name": "OffsetX",
        "value": 1984
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_Start",
      "name": "BN_HD_loop_Start",
      "action_id": "start_grab",
      "enabled": true,
      "parameters": {
        "buffer_count": 128
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_Wait",
      "name": "BN_HD_loop_Wait",
      "action_id": "wait",
      "enabled": true,
      "parameters": {
        "duration_ms": 200
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_Grab",
      "name": "BN_HD_loop_Grab",
      "action_id": "get_next_frame",
      "enabled": true,
      "parameters": {
        "output_context_key": "frame_hd",
        "timeout_ms": 1500
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_StopAfterGrab",
      "name": "BN_HD_loop_StopAfterGrab",
      "action_id": "stop_grab",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_Brightness",
      "name": "BN_HD_loop_Brightness",
      "action_id": "calculate_image_stats",
      "enabled": true,
      "parameters": {
        "frame_context_key": "frame_hd",
        "output_context_key_prefix": "hd_brt_",
        "calculate_mean": true
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_Compare",
      "name": "BN_HD_loop_Compare",
      "action_id": "compare_brightness",
      "enabled": true,
      "parameters": {
        "current_brightness_key": "hd_brt_mean",
        "previous_brightness_key": "hd_prev_brt",
        "threshold": 10.0
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_HD_loop_Scramble",
      "name": "BN_HD_loop_Scramble",
      "action_id": "detect_scrambled_image",
      "enabled": true,
      "parameters": {
        "current_frame_key": "frame_hd",
        "reference_frame_key": "pattern_hd",
        "ssim_threshold": 0.85,
        "mean_diff_threshold": 15.0
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_EndLoop",
      "name": "BN_EndLoop",
      "action_id": "repeat_block_end",
      "enabled": true,
      "parameters": {
        "block_id": "binning_compare_loop"
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "BN_LogEnd",
      "name": "BN_LogEnd",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "[BN] Section finished."
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "PS_StopFinally",
      "name": "PS_StopFinally",
      "action_id": "stop_grab",
      "enabled": true,
      "parameters": {},
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "PS_LogEnd",
      "name": "PS_LogEnd",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "[PS] Section finished."
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    },
    {
      "id": "FINAL_Log",
      "name": "FINAL_Log",
      "action_id": "log_message",
      "enabled": true,
      "parameters": {
        "message": "🎉 Combined camera-stress test v2.7 finished."
      },
      "validations": [],
      "delay_before_ms": 0,
      "delay_after_ms": 0,
      "continue_on_fail": false,
      "condition": null,
      "is_loop": false,
      "loop_start_label": null,
      "loop_start_index": null,
      "loop_end_label": null,
      "loop_condition_key": null,
      "loop_operator": null,
      "loop_target_value": null,
      "index_key": null,
      "max_loop_count": null,
      "repeat_count": 1,
      "notes": ""
    }
  ]
}